<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Đăng ký</title>
  <link rel="stylesheet" href="./style.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>


  <div class="wrapper">
    <form id="registerForm">
      <h1>Đăng ký</h1>
      <div class="input-box">
        <input id="registerUsername" type="text" placeholder="Tài khoản" required>
        <i class='bx bxs-user'></i>
      </div>

      <div class="input-box">
        <input id="registerEmail" type="email" placeholder="Email" required>
        <i class='bx bxs-envelope'></i>
      </div>

      <div class="input-box">
        <input id ="registerPassword" type="password" placeholder="Mật khẩu" required>
        <i class='bx bxs-lock-alt' ></i>
      </div>

      <div class="input-box">
        <input id="confirmPassword" type="password" placeholder="Nhập lại mật khẩu" required>
        <i class='bx bxs-lock-alt'></i>
      </div>

      <button type="button" onclick="validateRegistration()" class="btn">Đăng ký</button>
      <div class="register-link">
        <p>Đã có tài khoản? <a href="./index.html">Đăng nhập</a></p>
      </div>
    </form>
  </div>
  <script>
    function validateRegistration() {
        var registerUsername = document.getElementById("registerUsername").value;
        var registerEmail = document.getElementById("registerEmail").value;
        var registerPassword = document.getElementById("registerPassword").value;
        var confirmPassword = document.getElementById("confirmPassword").value;
  
        // Kiểm tra tính hợp lệ - Demo: Chỉ kiểm tra có giá trị hay không
        if (registerUsername && registerEmail && registerPassword && confirmPassword) {
            if (registerPassword === confirmPassword) {
                // Kiểm tra xem người dùng đã tồn tại chưa
                if (!isUserExist(registerUsername)) {
                    // Lưu thông tin người dùng vào localStorage
                    var user = {
                        username: registerUsername,
                        email: registerEmail,
                        password: registerPassword
                    };
                    localStorage.setItem(registerUsername, JSON.stringify(user));
  
                    alert("Đăng ký thành công!\nTên người dùng: " + registerUsername + "\nEmail: " + registerEmail);
                    window.location.href = "./index.html";
                } else {
                    alert("Tên người dùng đã tồn tại. Vui lòng chọn tên khác.");
                }
            } else {
                alert("Mật khẩu và xác nhận mật khẩu không khớp!");
            }
        } else {
            alert("Vui lòng nhập đầy đủ thông tin đăng ký!");
        }
    }
  
    // Hàm kiểm tra xem người dùng đã tồn tại hay chưa
    function isUserExist(username) {
        return localStorage.getItem(username) !== null;
    }
  </script>
</body>

</html>